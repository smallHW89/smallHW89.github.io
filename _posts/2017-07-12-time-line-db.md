---
date: 2017-07-12 07:26
status: public
title: 时序数据库相关笔记
---

## 好文参考
[时序数据库武斗大会系列文章](http://liubin.org/blog/2016/02/18/tsdb-intro/)
[时间序列数据的存储和计算](https://yq.aliyun.com/articles/104243)
[数据库排名网站](https://db-engines.com/en/ranking)
## 什么是时序数据库
时序数据：基于时间的一系列数据。在有时间的坐标中将这些数据点练成线，往过去看可以做成多维
报表，揭示其趋势性，规律性，异常性；往未来看可以做成大数据分析，预测，预警
时序数据库，时间序列 数据库， 主要用于处理时序数据， 需要支持时序数据的快速写入、持久化，多维度聚合查询等基本功能。
基于时间序列数据的特点，关系型数据库无法满足对时间序列数据的有效存储与处理，因此迫切需要一种专门针对时间序列数据来做优化的数据库系统，即时间序列数据库。

## 时序数据库基本概念
1. metric: 度量 ,相当于关系数据库中的table
2. data point:数据点，类似关系数据库中的行
3. timestamp:  时间戳，代表数据点产生的时间
4. field: metric下的不同字段。 一般情况下存放是随着时间戳变化而变化的数据。
5. tag：标签，附加信息，一般存放的是不随着时间变化而变化的属性。

## 数据模型：
1. 按指标建模
2. 按数据源建模
3. 上面两种模型没有明确的优劣，如果底层是列式存储且每个列上都有索引，则按数据源建模会简单干净。 如果底层是类似HBase, Cassandra这种多个指标值存储在同一行会影响对其中某个指标的查询或过滤效率，通常用按指标建模

## 时序数据库的应用场景
互联网业务场景，大量的时序数据产生； 内部业务系统的运行监控信息 等。
比如多维监控。

## 时序数据库的挑战
1. 时序数据写入：  写入量大
2. 时序数据读取：  对大量数据聚合运算
3. 成本
4. 写多于多，顺序写，追加写，很少更新，区块删除

## 时序数据库的存储设计
1. 存储引擎一般采用LSM Tree ，类似levedb. 
2. 分布式存储：面对海量数据，单机肯定无法满足，要用分布式存储
3. 数据分片： metric+tags 来分片，再按时间范围分段 。

##  时序数据库软件
1. influxDB:  单机版开源
2. Kairosdb: 底层采用Cassandra分布式存储 ， Cassandra底层也是采用的LSM Tree。
3. OpenTsdb: 底层用Hbase（内部也是LSM tree).  采用范围划分的分片方式，采用row-key做分片
4. HiTSDB : 阿里云的


## 列式存储 于 行式数据可

